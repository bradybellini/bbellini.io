---
// Search form component for Brave search
---

<div class="w-full max-w-xl mx-auto">
  <form
    id="search-form"
    action="https://search.brave.com/search"
    method="get"
    target="_blank"
    class="bg-primary border border-secondary p-1 flex items-center gap-1"
  >
    <input
      id="search-input"
      name="q"
      type="text"
      placeholder="Search..."
      class="flex-1 bg-primary border border-secondary p-1 focus:outline-none focus:border-accent text-[8px] font-sharp-alt text-secondary"
      autocomplete="off"
    />
    <button
      type="submit"
      class="cursor-pointer p-0.5 border border-secondary hover:bg-secondary hover:text-primary transition-colors flex items-center justify-center"
      title="Search"
    >
      <svg
      class="w-4 h-4"
        viewBox="0 0 15 15"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        width="15"
        height="15"
        ><path
          d="M8.5 8.5l2 2M7 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"
          stroke="currentColor"></path></svg
      >
    </button>
  </form>
</div>

<script>
  (function () {
    const searchInput = document.getElementById(
      "search-input"
    ) as HTMLInputElement;
    const searchForm = document.getElementById(
      "search-form"
    ) as HTMLFormElement;

    if (!searchInput || !searchForm) return;

    // Auto-focus on the search input when the page loads
    searchInput.focus();

    // Handle form submission
    searchForm.addEventListener("submit", (e) => {
      const query = searchInput.value.trim();
      if (!query) {
        e.preventDefault();
        return;
      }
      // Clear the search box after submission
      setTimeout(() => {
        searchInput.value = "";
      }, 100);
      // Form will naturally submit to Brave search with the query parameter
    });
  })();
</script>
